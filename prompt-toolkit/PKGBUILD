_module="prompt_toolkit"
pkgname=("python-${_module}" "python2-${_module}")
pkgver=0.17
pkgrel=1
pkgdesc="Library for building powerful interactive command lines in Python"
url="https://github.com/jonathanslenders/python-prompt-toolkit"
license=('CUSTOM')
arch=('any')
source=("https://pypi.python.org/packages/source/p/prompt_toolkit/prompt_toolkit-${pkgver}.tar.gz")
sha512sums=('78134b18d71aef141cbef8bc41271a7bd7402cc4841b6c71279c3ec0ef266f859d20996c2f07d41fa7d2832d31f00c2c938336515e68078d6d954bcc80f9d89c')

prepare() {
    cp -a "${srcdir}/${_module}-${pkgver}"{,-python2}
}

package_python-prompt_toolkit() {
    depends=('python' 'python-docopt' 'python-jedi' 'python-pygments' 'python-six' 'python-wcwidth')
    makedepends=('python-setuptools')
    cd "$srcdir/${_module}-${pkgver}"
    python setup.py install --root="${pkgdir}" --optimize=1
}


package_python2-prompt_toolkit() {
    depends=('python2' 'python2-docopt' 'python2-jedi' 'python2-pygments' 'python2-six' 'python2-wcwidth')
    makedepends=('python2-setuptools')
    cd "$srcdir/${_module}-${pkgver}-python2"
    python2 setup.py install --root="${pkgdir}" --optimize=1
    mv "${pkgdir}/usr/bin/ptpython"{,2}
    mv "${pkgdir}/usr/bin/ptipython"{,2}
}
