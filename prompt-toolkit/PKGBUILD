_module="prompt_toolkit"
pkgname=("python-${_module}" "python2-${_module}")
pkgver=0.20
pkgrel=1
pkgdesc="Library for building powerful interactive command lines in Python"
url="https://github.com/jonathanslenders/python-prompt-toolkit"
license=('CUSTOM')
arch=('any')
source=("https://pypi.python.org/packages/source/p/prompt_toolkit/prompt_toolkit-${pkgver}.tar.gz")
sha512sums=('d2a4b98ee2999e135ebba969e079c3686d61bb1f23acf66750b7350380a38302ee96b4c430f9ce4253d75016a1f9e83d99d4d5d0c5d2f62875bd1090d7afc52a')

prepare() {
    cp -a "${srcdir}/${_module}-${pkgver}"{,-python2}
}

package_python-prompt_toolkit() {
    depends=('python' 'python-docopt' 'python-jedi' 'python-pygments' 'python-six' 'python-wcwidth')
    makedepends=('python-setuptools')
    optdepends=('ipython: ptipython (Prompt Toolkit IPython wrapper)')
    cd "$srcdir/${_module}-${pkgver}"
    python setup.py install --root="${pkgdir}" --optimize=1
}


package_python2-prompt_toolkit() {
    depends=('python2' 'python2-docopt' 'python2-jedi' 'python2-pygments' 'python2-six' 'python2-wcwidth')
    makedepends=('python2-setuptools')
    optdepends=('ipython2: ptipython (Prompt Toolkit IPython wrapper)')
    cd "$srcdir/${_module}-${pkgver}-python2"
    python2 setup.py install --root="${pkgdir}" --optimize=1
    mv "${pkgdir}/usr/bin/ptpython"{,2}
    mv "${pkgdir}/usr/bin/ptipython"{,2}
}
